{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-module" data-toggle="tooltip" title="{{ button_apply }}" class="btn btn-success" name="apply" value="1"><i class="fa fa-save"></i></button>
        <button type="submit" form="form-module" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
        <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if success %}
      <div class="alert alert-success alert-dismissible"><i class="fa fa-check-circle"></i> {{ success }}
        <button type="button" class="close" data-dismiss="alert">&times;</button>
      </div>
    {% endif %}
    {% if error_warning %}
    <div class="alert alert-danger alert-dismissible">
      <i class="fa fa-exclamation-circle"></i> {{ error_warning }} <button type="button" class="close" data-dismiss="alert">&times;</button>
      {% if error_title or error_width or error_height or error_length or error_limit or error_categories_selected %}
        <ul>
          {% if error_title %}
            {% for title in error_title %}
              <li class="text-muted">{{ title }}</li>
            {% endfor %}
          {% endif %}
          {% if error_width %}
            <li class="text-muted">{{ error_width }}</li>
          {% endif %}
          {% if error_height %}
            <li class="text-muted">{{ error_height }}</li>
          {% endif %}
          {% if error_length %}
            <li class="text-muted">{{ error_length }}</li>
          {% endif %}
          {% if error_limit %}
            <li class="text-muted">{{ error_limit }}</li>
          {% endif %}
          {% if error_categories_selected %}
            <li class="text-muted">{{ error_categories_selected }}</li>
          {% endif %}
        </ul>
      {% endif %}
    </div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-module" class="form-horizontal">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab-general" data-toggle="tab">{{ tab_general }}</a></li>
            <li><a href="#tab-category" data-toggle="tab">{{ tab_category }}</a></li>
            <li><a href="#tab-subcategory" data-toggle="tab">{{ tab_subcategory }}</a></li>
            <li><a href="#tab-info" data-toggle="tab">{{ tab_info }}</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane fade in active" id="tab-general">
              <ul class="nav nav-tabs" id="language">
                {% for language in languages %}
                  <li {% if loop.first %}class="active"{% endif %}><a href="#language{{ language.language_id }}" data-toggle="tab"><img src="language/{{ language.code }}/{{ language.code }}.png" title="{{ language.name }}" /> {{ language.name }}</a></li>
                {% endfor %}
              </ul>
              <div class="tab-content">
                {% for language in languages %}
                <div class="tab-pane {% if loop.first %}active{% endif %}" id="language{{ language.language_id }}">
                  <div class="form-group required">
                    <label class="col-sm-2 control-label" for="input-title--{{ language.language_id }}">{{ entry_title }}</label>
                    <div class="col-sm-10">
                      <input type="text" name="module_ocn_category_wall_pro_title--{{ language.language_id }}" value="{{ module_ocn_category_wall_pro_title[language.language_id] }}" placeholder="{{ entry_title }}" id="input-title--{{ language.language_id }}" class="form-control">
                      {% if error_title[language.language_id] %}
                        <div class="text-danger">{{ error_title[language.language_id] }}</div>
                      {% endif %}
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
              <hr>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
                <div class="col-sm-10">
                  <select name="module_ocn_category_wall_pro_status" id="input-status" class="form-control">
                    <option value="1" {% if module_ocn_category_wall_pro_status == 1 %}selected="selected"{% endif %}>{{ text_enabled }}</option>
                    <option value="0" {% if module_ocn_category_wall_pro_status == 0 %}selected="selected"{% endif %}>{{ text_disabled }}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="tab-category">
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-image-status">{{ entry_image }}</label>
                <div class="col-sm-10">
                  <select name="module_ocn_category_wall_pro_image_status" id="input-image-status" class="form-control">
                    <option value="1" {% if module_ocn_category_wall_pro_image_status == 1 %}selected="selected"{% endif %}>{{ text_enabled }}</option>
                    <option value="0" {% if module_ocn_category_wall_pro_image_status == 0 %}selected="selected"{% endif %}>{{ text_disabled }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group required">
                <label class="col-sm-2 control-label" for="input-image-width">{{ entry_image_width }}</label>
                <div class="col-sm-10">
                  <input type="text" name="module_ocn_category_wall_pro_image_width" value="{{ module_ocn_category_wall_pro_image_width }}" placeholder="220" id="input-image-width" class="form-control">
                  {% if error_width %}
                    <div class="text-danger">{{ error_width }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group required">
                <label class="col-sm-2 control-label" for="input-image-height">{{ entry_image_height }}</label>
                <div class="col-sm-10">
                  <input type="text" name="module_ocn_category_wall_pro_image_height" value="{{ module_ocn_category_wall_pro_image_height }}" placeholder="80" id="input-image-height" class="form-control">
                  {% if error_height %}
                    <div class="text-danger">{{ error_height }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-description-status">{{ entry_description }}</label>
                <div class="col-sm-10">
                  <select name="module_ocn_category_wall_pro_description_status" id="input-description-status" class="form-control">
                    <option value="1" {% if module_ocn_category_wall_pro_description_status == 1 %}selected="selected"{% endif %}>{{ text_enabled }}</option>
                    <option value="0" {% if module_ocn_category_wall_pro_description_status == 0 %}selected="selected"{% endif %}>{{ text_disabled }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group required">
                <label class="col-sm-2 control-label" for="input-description-length">{{ entry_description_length }}</label>
                <div class="col-sm-10">
                  <input type="text" name="module_ocn_category_wall_pro_description_length" value="{{ module_ocn_category_wall_pro_description_length }}" placeholder="{{ placeholder_limit_cancel }}" id="input-description-length" class="form-control">
                  {% if error_length %}
                    <div class="text-danger">{{ error_length }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group" id="form-group-categories-type">
                <label class="col-sm-2 control-label" for="input-categories-type">{{ entry_category_type }}</label>
                <div class="col-sm-10">
                  <select name="module_ocn_category_wall_pro_categories_type" class="form-control" id="input-categories-type">
                    <option value="all" {% if module_ocn_category_wall_pro_categories_type == 'all' %}selected="selected"{% endif %}>{{ text_category_type_all }}</option>
                    <option value="selected" {% if module_ocn_category_wall_pro_categories_type == 'selected' %}selected="selected"{% endif %}>{{ text_category_type_selected }}</option>
                  </select>
                  <i class="text-info">{{ help_categories_type }}</i>
                </div>
              </div>
              <div class="form-group" id="form-group-categories">
                <label class="col-sm-2 control-label">{{ entry_category }}</label>
                <div class="col-sm-10">
                  <div class="well well-sm" style="height: 150px; overflow: auto;">
                    {% for category in categories %}
                      <div class="checkbox">
                        <label>
                          <input type="checkbox" name="module_ocn_category_wall_pro_categories[]" value="{{ category.category_id }}" {% if category.category_id in module_ocn_category_wall_pro_categories %}checked="checked"{% endif %}>
                          {{ category.name }}
                        </label>
                      </div>
                    {% endfor %}
                  </div>
                  <i class="text-info" data-text="{{ help_categories_selected }}" data-count="true"></i>
                  {% if error_categories_selected %}
                    <div class="text-danger">{{ error_categories_selected }}</div>
                  {% endif %}
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="tab-subcategory">
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-subcategory-status">{{ entry_subcategory }}</label>
                <div class="col-sm-10">
                  <select name="module_ocn_category_wall_pro_subcategory_status" id="input-subcategory-status" class="form-control">
                    <option value="1" {% if module_ocn_category_wall_pro_subcategory_status == 1 %}selected="selected"{% endif %}>{{ text_enabled }}</option>
                    <option value="0" {% if module_ocn_category_wall_pro_subcategory_status == 0 %}selected="selected"{% endif %}>{{ text_disabled }}</option>
                  </select>
                </div>
              </div>
              <div class="form-group required">
                <label class="col-sm-2 control-label" for="input-subcategory-limit">{{ entry_subcategory_limit }}</label>
                <div class="col-sm-10">
                  <input type="text" name="module_ocn_category_wall_pro_subcategory_limit" value="{{ module_ocn_category_wall_pro_subcategory_limit }}" placeholder="{{ placeholder_limit_cancel }}" id="input-subcategory-limit" class="form-control">
                  {% if error_limit %}
                    <div class="text-danger">{{ error_limit }}</div>
                  {% endif %}
                </div>
              </div>
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-subcategory-collapse-status">{{ entry_collapse }}</label>
                <div class="col-sm-10">
                  <select name="module_ocn_category_wall_pro_subcategory_collapse_status" id="input-subcategory-collapse-status" class="form-control">
                    <option value="1" {% if module_ocn_category_wall_pro_subcategory_collapse_status == 1 %}selected="selected"{% endif %}>{{ text_enabled }}</option>
                    <option value="0" {% if module_ocn_category_wall_pro_subcategory_collapse_status == 0 %}selected="selected"{% endif %}>{{ text_disabled }}</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="tab-pane fade" id="tab-info">
              <div class="row">
                <div class="col-sm-12 col-md-8 col-lg-6">
                    <table class="table table-striped table-hover">
                      <tbody>
                      <tr>
                        <td>{{ text_name }}:</td>
                        <td><a href="{{ data_extension_link }}" target="_blank">{{ heading_title }}</a></td>
                      </tr>
                      <tr>
                        <td>{{ text_author }}:</td>
                        <td><a href="{{ data_author_link }}" target="_blank">{{ data_author_name }}</a></td>
                      </tr>
                      <tr>
                        <td>{{ text_version }}:</td>
                        <td>{{ data_version }}</td>
                      </tr>
                      </tbody>
                    </table>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="panel-footer">{{ heading_title }} v{{ data_version }}</div>
    </div>
  </div>
</div>
<script>
$(window).on('load', function () {
  checkType()
  countCategories()

  $('#input-categories-type').on('change', checkType);
  $('#form-group-categories input').on('change', countCategories);

  function checkType() {
    if ($('#input-categories-type').val() == 'selected' && !$('#form-group-categories').hasClass('required')) {
      $('#form-group-categories').addClass('required')
      $('#form-group-categories-type i.text-info').removeClass('hidden')
    } else {
      $('#form-group-categories').removeClass('required')
      $('#form-group-categories-type i.text-info').addClass('hidden')
    }
  }

  function countCategories() {
    let counter = $('#form-group-categories input:checked').length;
    let text = $('#form-group-categories i.text-info').attr('data-text') + counter;
    $('#form-group-categories i[data-count=true]').text(text);

    if (counter < 1 && $('#input-categories-type').val() == 'selected') {
      $('#form-group-categories i[data-count=true]').addClass('text-danger');
    } else {
      $('#form-group-categories i[data-count=true]').removeClass('text-danger');
    }
  }
});
</script>
{{ footer }}
